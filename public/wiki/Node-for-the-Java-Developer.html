<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Cache-control" content="public">
    <meta http-equiv="Age" content="86400">
    <meta http-equiv="Content-Encoding" content=”gzip”/>
    


    <title>
        
        Ricston UK Ltd - The Integration nijas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Back Home
Getting Started with Node.js for the Java DeveloperBeing a non-dogmatic Java Developer for over 10 years that also faced the scorn of purists for using groovy and jvm languages it is not har">
<meta property="og:type" content="website">
<meta property="og:title" content="Ricston UK Ltd - The Integration nijas">
<meta property="og:url" content="http://ricston.co.uk/wiki/Node-for-the-Java-Developer.html">
<meta property="og:site_name" content="Ricston UK Ltd - The Integration nijas">
<meta property="og:description" content="Back Home
Getting Started with Node.js for the Java DeveloperBeing a non-dogmatic Java Developer for over 10 years that also faced the scorn of purists for using groovy and jvm languages it is not har">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ricston UK Ltd - The Integration nijas">
<meta name="twitter:description" content="Back Home
Getting Started with Node.js for the Java DeveloperBeing a non-dogmatic Java Developer for over 10 years that also faced the scorn of purists for using groovy and jvm languages it is not har">
    
    <link rel="alternative" href="/atom.xml" title="Ricston UK Ltd - The Integration nijas" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.png">
    
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    


    <!-- Bootstrap  -->
    <link type="text/css" rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.4/custom/bootstrap.min.css">
    <!-- web font  -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,800" rel="stylesheet" type="text/css">
    <!-- plugin css  -->
    <link rel="stylesheet" type="text/css" href="/css/animate.css"/>
    <!--<link rel="stylesheet" type="text/css" href="/css/magnific-popup.css"/>-->
    <!--<link type="text/css" rel="stylesheet" href="/css/isotype_style.css">-->
    <link rel="stylesheet" type="text/css" href="/css/flexslider.css"/>
    <link rel="stylesheet" type="text/css" href="/css/pageslide/jquery.pageslide.css"/>
    <!-- Owl carousel-->
    <link rel="stylesheet" href="/owl.carousel/owl.carousel.css">
    <link rel="stylesheet" href="/owl.carousel/owl.theme.css">
    <link rel="stylesheet" href="/owl.carousel/owl.transitions.css">
    <link rel="stylesheet" href="/bower_components/fontawesome/css/font-awesome.css"/>
    <!-- Custom css -->
    <link type="text/css" rel="stylesheet" href="/css/layout.css">
    <link type="text/css" id="colors" rel="stylesheet" href="/css/colors.css">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>


</head>
<body>
<!-- globalWrapper -->
<div id="globalWrapper" class="localscroll">
<!-- header -->
<header id="mainHeader" class="navbar-fixed-top" role="banner">
    <div class="container">
        <nav class="navbar navbar-default scrollMenu" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span> <span
                            class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/index.html"><img width="180px" src="/images/ricstonLogoNew2.gif" alt="Ricston Logo"/></a></div>
            <div class="collapse navbar-collapse navbar-ex1-collapse" id="scrollTarget">
                <ul class="nav navbar-nav pull-right">
                    <li class="active"><a href="/"><i class="fa fa-home"></i>Home</a></li>
                    <li id="services"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"  aria-expanded="false">
                            <i class="fa fa-thumbs-up"></i>Services</a>
                        <!--<span class="caret"></span>-->
                        <!--</a>-->
                        <ul class="dropdown-menu right" role="menu">
                            <li class="customMenu"><a href="/#services">Our Services</a></li>
                            <li class="customMenu"><a href="/tech/#Mule">Mule Integration</a></li>
                            <li class="customMenu"><a href="/tech/#Open Source">Open Source</a></li>
                            <li class="customMenu"><a href="/tech/java.html">Java</a></li>
                            <li class="customMenu"><a href="/tech/#Migration">Migration</a></li>
                            <li class="customMenu"><a href="/tech/#DevOps">Dev Ops</a></li>
                            <li class="customMenu"><a href="/tech/#Testing">Testing</a></li>
                            <li class="customMenu"><a href="/tech/#Db Design">DB Design</a></li>
                            <li class="customMenu"><a href="/tech/#Big Data">Big Data</a></li>
                            <li class="customMenu"><a href="/tech/#Micro Services">Micro Services</a></li>
                            <li class="customMenu"><a href="/tech/#Apis">Apis</a></li>
                        </ul></li>
                    <li><a href="/#about"><i class="fa fa-question"></i>About Us</a></li>
                    <li id="industries"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-expanded="false"><i
                                    class="fa fa-paperclip"></i>Industries</a>
                        <ul class="dropdown-menu" role="menu">
                            <li class="customMenu"><a href="/industries/">Industries</a></li>
                            <li class="customMenu"><a href="/industries/#Media_&_Telecom">Telecoms & Media</a></li>
                            <li class="customMenu"><a href="/industries/#Retail">Retail</a></li>
                            <li class="customMenu"><a href="/industries/#Finance">Finance</a></li>
                            <li class="customMenu"><a href="/industries/#Government">Government</a></li>
                        </ul>
                    </li>
                    <li id="works"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-expanded="false"><i class="fa fa-align-justify"></i>Works</a>
                        <ul class="dropdown-menu" role="menu">
                            <li class="customMenu"><a href="/#Works">Projects</a></li>
                            <li class="customMenu"><a href="/presentations">Presentations</a></li>
                            <li class="customMenu"><a href="/blog">Tech Blog</a></li>
                            <li class="customMenu"><a href="http://ricston.com/blog">Mule Blog</a></li>
                            <li class="customMenu"><a href="/wiki/index.html">Wiki</a></li>
                        </ul>
                    </li>
                    <li id="people"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                       aria-expanded="false"><i class="fa fa-users"></i>Our Team</a>
                        <ul class="dropdown-menu" role="menu">
                            <li class="customMenu"><a href="/#team">Our Team</a></li>
                            <li class="customMenu"><a href="/careers">Careers</a></li>
                        </ul>
                    </li>
                    <li><a href="/#contactSlice"><i class="fa fa-mail-reply"></i>Contact</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>
<!-- header variables -->
 <!--404.html-->
 <!---->
 <!--404.html-->
 <!--404.html-->
 <!--/home/richard/workspace/workspace_ricston/ricston_site/source/404.html-->
 <!---->


<script type="application/javascript">
    $(document).ready(function(){
//        alert ("got updated page   " );
        if ( document.location.pathname.startsWith("/tech")){
            $('.active').attr("class", "");
            $('li#works').attr("class","active");
        } else  if ( document.location.pathname.startsWith("/services") ){
            $('.active').attr("class", "");
            $('li#services').attr("class","active");
        }  else  if ( document.location.pathname.startsWith("/caseStudies")) {
            $('.active').attr("class", "");
            $('li#services').attr("class", "active");
        }  else  if ( document.location.pathname.startsWith("/careers")) {
            $('.active').attr("class", "");
            $('li#people').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/industries")) {
            $('.active').attr("class", "");
            $('li#industries').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/blog")) {
            $('.active').attr("class", "");
            $('li#works').attr("class", "active");
        }  else  if ( document.location.pathname.startsWith("/people")) {
            $('.active').attr("class", "");
            $('li#people').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/wiki")) {
            $('.active').attr("class", "");
            $('li#works').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/presentations")) {
            $('.active').attr("class", "");
            $('li#works').attr("class", "active");
        }
    });
</script>

<!-- header -->
  <div class="container" id="">
    <!--<div id="wrap">-->
      <div class="">
        <section id="main"><article id="page-undefined" class="article article-type-page col-md-20" itemscope
         itemprop="blogPost">
    <div class="article-meta">
        <a href="/wiki/Node-for-the-Java-Developer.html" class="article-date">
  <time datetime="2015-06-02T16:17:28.697Z" itemprop="datePublished">2015-06-02</time>
</a>
        
    </div>
    <div class="article-inner">
        
        
        <div class="article-entry" itemprop="articleBody">
            
            <p>Back <a href="/wiki">Home</a></p>
<h2 id="Getting_Started_with_Node-js_for_the_Java_Developer">Getting Started with Node.js for the Java Developer</h2><p>Being a non-dogmatic Java Developer for over 10 years that also faced the scorn of purists for using groovy and jvm languages it is not hard to appreciate the light weight speed of Nodejs but also have concerns about reliable implementations that need to be addressed</p>
<h2 id="What_is_Node-js?">What is Node.js?</h2><p>Node to me is two essential things </p>
<ul>
<li>it is a means to use javascript on the server side </li>
<li>it is not mandatory however node gains it’s efficiency by using non-blocking I/O and asynchronous events</li>
</ul>
<p>| maven respoisotires of jar’s and dependencies | Node uses npm modules and the version dependencies can be managed with bower| </p>
<h2 id="What_about_IDE_support?">What about IDE support?</h2><p>All of the traditional ide’s support Node </p>
<ul>
<li>Eclipse – This should be an easy win if you use it for Java. Just install the node.js extensions.</li>
<li>JetBrains IntelliJ IDEA – has excellent node and web technologies support </li>
<li>Microsoft Visual Studio – The new Microsoft has added native support for it inside of Visual Studio. </li>
<li>SublimeText 2 – A no frills text editor that is gaining in popularity among developers for its lightweight approach.</li>
</ul>
<h2 id="Project_Demo,_getting_started">Project Demo, getting started</h2><p>Create a simple REST service in both the Java EE and Node.js programming languages. The REST service will simply read information from a MongoDB database and return the results to the requestor. Covering the installation and configuration of the Java application server and MongoDB database are not in scope for this article.</p>
<p>Creating our Java application<br>Step 1: The pom.xml file</p>
<p>For the sample application, called restexample, I will be using the JBoss EAP Application Server. The first thing we want to do is configure our pom.xml file for dependency management using the Maven build system. Below is the pom.xml file that includes the dependencies that I will be using for the restexample application:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span>  <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>restexample<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>restexample<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="title">packaging</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">name</span>&gt;</span>restexample<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">repositories</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">repository</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">id</span>&gt;</span>eap<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">url</span>&gt;</span>http://maven.repository.redhat.com/techpreview/all<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">releases</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="title">releases</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">snapshots</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="title">snapshots</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="title">repository</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="title">repositories</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">pluginRepositories</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">pluginRepository</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">id</span>&gt;</span>eap<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">url</span>&gt;</span>http://maven.repository.redhat.com/techpreview/all<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">releases</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="title">releases</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">snapshots</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="title">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="title">enabled</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="title">snapshots</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="title">pluginRepository</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="title">pluginRepositories</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">properties</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="title">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">maven.compiler.source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="title">maven.compiler.source</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">maven.compiler.target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="title">maven.compiler.target</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="title">properties</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.jboss.spec<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jboss-javaee-6.0<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">version</span>&gt;</span>3.0.2.Final-redhat-4<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="title">type</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.mongodb<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mongo-java-driver<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">version</span>&gt;</span>2.9.1<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="title">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Step 2: Creating the beans.xml file and setting our servlet mapping</p>
<p>As part of the sample application, we will be using CDI (Context Dependency Injection) for our database access class. According to the official CDI specification, an application that makes use of CDI must have a beans.xml file located in the WEB-INF directory of the application. Given that, let’s create this file and populate it with the required information. Browse to your /src/main/webapp/WEB-INF directory and create a file named beans.xml and add the following code:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?</span>xml <span class="built_in">version</span>=<span class="string">"1.0"</span><span class="preprocessor">?&gt;</span></span><br><span class="line">&lt;beans xmlns=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span><br><span class="line">xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> xsi:schemaLocation=<span class="string">"http://java.sun.com/xml/ns/javaee http://jboss.org/schema/cdi/beans_1_0.xsd"</span>/&gt;</span><br><span class="line">We also need <span class="built_in">to</span> <span class="built_in">set</span> <span class="operator">the</span> our servlet mapping <span class="keyword">for</span> our REST API calls <span class="operator">in</span> <span class="operator">the</span> web.xml <span class="built_in">file</span>. Add <span class="operator">the</span> following servlet mapping <span class="keyword">element</span> <span class="built_in">to</span> <span class="operator">the</span> <span class="built_in">file</span> located <span class="operator">in</span> <span class="operator">the</span> /src/main/webapp/WEB-INF <span class="built_in">directory</span>:</span><br></pre></td></tr></table></figure>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;servlet-mapping&gt;</span></span><br><span class="line">   <span class="variable">&lt;servlet-name&gt;</span>javax.ws.rs.core.Application<span class="variable">&lt;/servlet-name&gt;</span></span><br><span class="line">   <span class="variable">&lt;url-pattern&gt;</span>/ws/<span class="keyword">*</span><span class="variable">&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="variable">&lt;/servlet-mapping&gt;</span></span><br></pre></td></tr></table></figure>
<p>Step 3: Creating the DBConnection class</p>
<p>At this point, we have our project setup and our pom.xml file includes the dependency for MongoDB to ensure that the drivers are packaged as part of our application. The next thing we need to do is to create a class that will manage the connection to the database for us. Create a new file named DBConnection.java and place the file in the /src/main/java/com/strongloop/data directory and include the following source code:</p>
<p>Ensure that you replace the connection authorization details with the appropriate information for your installation of MongoDB!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.strongloop.data;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> javax.enterprise.context.ApplicationScoped;</span><br><span class="line"><span class="keyword">import</span> javax.inject.Named;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.mongodb.DB;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.Mongo;</span><br><span class="line"> </span><br><span class="line"><span class="annotation">@Named</span></span><br><span class="line"><span class="annotation">@ApplicationScoped</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBConnection</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> DB mongoDB;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">DBConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>();</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="annotation">@PostConstruct</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       String mongoHost = <span class="string">"127.0.0.1"</span></span><br><span class="line">       String mongoPort = <span class="string">"27001"</span></span><br><span class="line">       String mongoUser = <span class="string">"strongloop"</span>;</span><br><span class="line">       String mongoPassword = <span class="string">"rocks"</span>;</span><br><span class="line">       String mongoDBName = <span class="string">"restexample"</span>;</span><br><span class="line">       <span class="keyword">int</span> port = Integer.decode(mongoPort);</span><br><span class="line"> </span><br><span class="line">       Mongo mongo = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           mongo = <span class="keyword">new</span> Mongo(mongoHost, port);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">           System.out.println(<span class="string">"Couldn't connect to MongoDB: "</span> + e.getMessage()</span><br><span class="line">                   + <span class="string">" :: "</span> + e.getClass());</span><br><span class="line">       &#125;</span><br><span class="line"> </span><br><span class="line">       mongoDB = mongo.getDB(mongoDBName);</span><br><span class="line"> </span><br><span class="line">       <span class="keyword">if</span> (mongoDB.authenticate(mongoUser, mongoPassword.toCharArray()) == <span class="keyword">false</span>) &#123;</span><br><span class="line">           System.out.println(<span class="string">"Failed to authenticate DB "</span>);</span><br><span class="line">       &#125;</span><br><span class="line"> </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> DB <span class="title">getDB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> mongoDB;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Step 4: Importing data into MongoDB </p>
<p>For our sample application, we are going to load a list of beers that match on the name of “Pabst”. If you are not familiar with beer drinking, the Pabst Brewing Company makes some of the finest American ale available. With signature products such as Pabst Blue Ribbon (PBR) and Colt 45, they have all of your malt drinking beverages basis covered.</p>
<p>pabst-coupon</p>
<p>The first thing you want to do is download a JSON file that has all the data that we want to return. You can grab this at the following URL:</p>
<p><a href="https://dl.dropboxusercontent.com/u/72466829/beers.json" target="_blank" rel="external">https://dl.dropboxusercontent.com/u/72466829/beers.json</a></p>
<p>Once you have the data set downloaded, simply load it into your database using the mongoimport command as shown below:<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mongoimport --jsonArray -<span class="keyword">d</span> yourDBName -c beers --<span class="keyword">type</span> json --<span class="keyword">file</span> /tmp/beers.json -<span class="keyword">h</span> yourMongoHost --port yourMongoPort -<span class="keyword">u</span> yourMongoUsername -p yourMongoPassword</span><br></pre></td></tr></table></figure></p>
<p>You should see the following results:<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">connected to: 127.0.0.1:27017</span><br><span class="line">Tue Jun 10 20:09:55.436<span class="instruction"> check </span>9 24</span><br><span class="line">Tue Jun 10 20:09:55.437 imported 24 objects</span><br></pre></td></tr></table></figure></p>
<h3 id="Step_5:_Creating_the_Beer_model_object">Step 5: Creating the Beer model object</h3><p>Now that we have a database connection class created and the beer information loaded into the MongoDB database, its time to create the model object that will hold our beer information. Create a new file called Beer.java and place it in the /src/main/java/com/strongloop/data directory. Once you have the file created, add the following source code:</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.strongloop.data;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class Beer &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">String</span> id;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">String</span> name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">String</span> description;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">String</span> getId() &#123;</span><br><span class="line">       <span class="keyword">return</span> id;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> setId(<span class="keyword">String</span> id) &#123;</span><br><span class="line">       <span class="keyword">this</span>.id = id;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">String</span> getName() &#123;</span><br><span class="line">       <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> setName(<span class="keyword">String</span> name) &#123;</span><br><span class="line">       <span class="keyword">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">String</span> getDescription() &#123;</span><br><span class="line">       <span class="keyword">return</span> description;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> setDescription(<span class="keyword">String</span> description) &#123;</span><br><span class="line">       <span class="keyword">this</span>.description = description;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note: The JSON file provided contains more information that what we will be using so have a poke around and add some additional functionality to expand the learning experience.</p>
<h3 id="Step_6:_Creating_the_REST_service">Step 6: Creating the REST service</h3><p>Guess what? We are finally ready to create the REST based web service that will allows us to retrieve the beers we loaded in a previous step. To do this, create a new file named BeerWS.java and place it in the /src/main/java/com/strongloop/webservice directory. Once you have the file created, add the following source code:</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">package com.strongloop.webservice;</span><br><span class="line"> </span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> java.util.ArrayList;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> java.util.List;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> javax.enterprise.context.RequestScoped;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> javax.inject.Inject;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> javax.ws.rs.GET;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> javax.ws.rs.Path;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> javax.ws.rs.Produces;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> javax.ws.rs.QueryParam;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.strongloop.data.DBConnection;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.strongloop.data.Beer;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.mongodb.BasicDBObject;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.mongodb.DB;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.mongodb.DBCollection;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.mongodb.DBCursor;</span></span><br><span class="line"><span class="preprocessor"><span class="keyword">import</span> com.mongodb.DBObject;</span></span><br><span class="line"> </span><br><span class="line">@RequestScoped</span><br><span class="line">@Path(<span class="string">"/beers"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeerWS</span> &#123;</span></span><br><span class="line"> </span><br><span class="line">   @Inject</span><br><span class="line">   <span class="keyword">private</span> DBConnection dbConnection;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> DBCollection getBeerCollection() &#123;</span><br><span class="line">       DB db = dbConnection.getDB();</span><br><span class="line">       DBCollection beerCollection = db.getCollection(<span class="string">"beers"</span>);</span><br><span class="line">       <span class="keyword">return</span> beerCollection;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> Beer populateBeerInformation(DBObject dataValue) &#123;</span><br><span class="line">       Beer theBeer = <span class="keyword">new</span> Beer();</span><br><span class="line">       theBeer.setName(dataValue.get(<span class="string">"name"</span>));</span><br><span class="line">       theBeer.setDescription(dataValue.get(<span class="string">"name"</span>));</span><br><span class="line">       theBeer.setId(dataValue.get(<span class="string">"_id"</span>).toString());</span><br><span class="line"> </span><br><span class="line">       <span class="keyword">return</span> theBeer;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   // get all of the beers</span><br><span class="line">   @GET()</span><br><span class="line">   @Produces(<span class="string">"application/json"</span>)</span><br><span class="line">   <span class="keyword">public</span> List&lt;Beer&gt; getAllBeers() &#123;</span><br><span class="line">       ArrayList&lt;Beer&gt; allBeersList = <span class="keyword">new</span> ArrayList&lt;Beer&gt;();</span><br><span class="line"> </span><br><span class="line">       DBCollection beers = this.getBeerCollection();</span><br><span class="line">       DBCursor cursor = beers.find();</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">while</span> (cursor.hasNext()) &#123;</span><br><span class="line">               allBeersList.add(this.populateBeerInformation(cursor.<span class="keyword">next</span>()));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; finally &#123;</span><br><span class="line">           cursor.close();</span><br><span class="line">       &#125;</span><br><span class="line"> </span><br><span class="line">       <span class="keyword">return</span> allBeersList;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Step_7:_Bask_in_the_joy_of_viewing_beers">Step 7: Bask in the joy of viewing beers</h3><p>Whew finally. We now have a REST web service written that will find all of the beers in our database. Deploy your code to your application server and verify it is working by browsing the following URL:</p>
<p><a href="http://yourserverlocation/ws/beers" target="_blank" rel="external">http://yourserverlocation/ws/beers</a></p>
<p>If everything went as it should, you will see all of the beers listed as shown in the following image:</p>
<p>restexample</p>
<h2 id="Creating_our_Node_application">Creating our Node application</h2><p>If you have been following along with the Java code in this blog post, you have realized that even with great strides being made recently in Java EE land, creating something as simple as a REST service is still very verbose. Don’t get me wrong, I still love working in Java EE but have found that for a lot of tasks, such as creating REST services that return JSON data, Node is the way to go. For the rest of this post, we are going to create the same simple web service using the LoopBack API framework from StrongLoop. As an added bonus, I will walk you through installing Node on OSX.</p>
<p>Step 1: Installing Node</p>
<p>The easiest way to install Node is via one of the available binary packages that is available for most operating systems. Point your browser to the following URL and download the correct one for your operating system:</p>
<p><a href="http://nodejs.org/download/" target="_blank" rel="external">http://nodejs.org/download/</a></p>
<p>Once this page loads, you should see the following:<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">install</span></span><br></pre></td></tr></table></figure></p>
<p>If you are using Mac OSX, click on the universal .pkg file. This will save the installation program to your local computer. Once the file has been downloaded, start the installation program by double clicking on the .pkg file that has been downloaded and you will be presented the installation dialog:</p>
<p>wizard</p>
<p>Complete the installation process by using all of the defaults and finally click on the close button to exit the program once the installation has been successful.<br>Pretty easy, huh?</p>
<h3 id="Step_2:_Installing_LoopBack_with_NPM">Step 2: Installing LoopBack with NPM</h3><p>Now that we have Node installed on our local system, we want to install the LoopBack packages that is provided by StrongLoop. LoopBack is an open source API that provides functionality that will make your life easier as you begin to learn how to write and deploy software written in Node.</p>
<p>In order to install LoopBack, we will be using the npm command that is part of the core language. NPM is the official package manager for installing libraries or modules that your applications depend on. Given that this post is written for Java developers, an easy way to think of NPM modules is to relate it to Maven. Using the Maven build system, developers are able to specify dependencies in their pom.xml file. Once the application is scheduled for a build, all of the dependencies are downloaded and the .jar files are included in the project. NPM modules works the same way and uses the package.json file to allow you to specify dependencies for a particular application. You can also install dependencies from the command line to make them available on your local system. Don’t worry if you don’t understand this just yet as we will cover the package.json file in more detail in a later step.</p>
<p>In order to install LoopBack, we can issue a single command that will download and install all of the dependencies we need for the package. Open up your terminal window and issue the following command:<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> -g strongloop</span><br></pre></td></tr></table></figure></p>
<p>Note: You may have to use sudo depending on your installation</p>
<p>What just happened? We told npm that we want to install the strong-cli package while also providing the -g option. The -g option makes the package available as a global package for anyone of the system to use and is available to all applications. Once you run the above command, NPM will download the package as well as any dependencies that is required. Depending on the speed of your system, this may take a few minutes to complete.</p>
<h3 id="Step_3:_Creating_our_application">Step 3: Creating our application</h3><p>Creating an application using the LoopBack API is very easy and straight-forward. Simply up your terminal window and issue the following command to create a new application called restexample.<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>slc loopback</span><br></pre></td></tr></table></figure></p>
<p>This prompts for a project directory. Lets pass restexample as the directory name for purposes of this exercise. It then prompts for the application name. We will keep the default restexample.</p>
<p>The slc utility will now create a new LoopBack based project called restexample and configure the project. A new directory will also be created where you ran the command named after the application. Change to the application directory with the cd command:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> restexample</span><br></pre></td></tr></table></figure></p>
<p>Now that we have our application created, we want to add support for MongoDB as a datasource for LoopBack.</p>
<h3 id="Step_4:_Defining_our_DataSource">Step 4: Defining our DataSource</h3><p>In order to communicate with MongoDB, we need add a datasource to our application. We do that by running:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="tag">slc</span> <span class="rule"><span class="attribute">loopback</span>:<span class="value">datasource</span></span></span><br></pre></td></tr></table></figure></p>
<p>We get a prompt to enter the data-source name, which can be anything custom. Let’s choose myMongo<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr_selector">[?]</span> <span class="tag">Enter</span> <span class="tag">the</span> <span class="tag">data-source</span> <span class="rule"><span class="attribute">name</span>:<span class="value"> myMongo</span></span></span><br></pre></td></tr></table></figure></p>
<p>Now we can attach the backend datasource definition to the real connector supported by StrongLoop. Here we choose the MongoDB connector from the list.<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">[<span class="keyword">?</span>] Select the connector for myMongo:</span><br><span class="line">PostgreSQL <span class="list">(<span class="keyword">supported</span> by StrongLoop)</span></span><br><span class="line">Oracle <span class="list">(<span class="keyword">supported</span> by StrongLoop)</span></span><br><span class="line">Microsoft SQL <span class="list">(<span class="keyword">supported</span> by StrongLoop)</span></span><br><span class="line">❯ MongoDB <span class="list">(<span class="keyword">supported</span> by StrongLoop)</span></span><br><span class="line">SOAP webservices <span class="list">(<span class="keyword">supported</span> by StrongLoop)</span></span><br><span class="line">REST services <span class="list">(<span class="keyword">supported</span> by StrongLoop)</span></span><br><span class="line">Neo4j <span class="list">(<span class="keyword">provided</span> by community)</span></span><br><span class="line"><span class="list">(<span class="keyword">Move</span> up and down to reveal more choices)</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="Step_5:_Pointing_to_the_real_datasource">Step 5: Pointing to the real datasource</h3><p>In order to communicate with MongoDB, we need point at the actual MongoDB instance. LoopBack defines all datasource configuration in the datasource.json file that is located in your application root/server directory. Open this file and add a datasource for MongoDB as shown in the following code:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line"> "<span class="attribute">db</span>": <span class="value">&#123;</span><br><span class="line">   "<span class="attribute">name</span>": <span class="value"><span class="string">"db"</span></span>,</span><br><span class="line">   "<span class="attribute">connector</span>": <span class="value"><span class="string">"memory"</span></span><br><span class="line"> </span>&#125;</span>,</span><br><span class="line"> "<span class="attribute">myMongo</span>": <span class="value">&#123;</span><br><span class="line">   "<span class="attribute">name</span>": <span class="value"><span class="string">"myMongo"</span></span>,</span><br><span class="line">   "<span class="attribute">connector</span>": <span class="value"><span class="string">"mongodb"</span></span><br><span class="line">   <span class="string">"url"</span>: <span class="string">"mongodb://localhost:27017/restexample"</span></span><br><span class="line"> </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<p>Note: Be sure to provide the correct connection URL for your MongoDB database. For this example, I have a database created called restexample that I want to use for my datasource.</p>
<h3 id="Step_6:_Importing_data_into_MongoDB_(mmmmm_Beer)">Step 6: Importing data into MongoDB (mmmmm Beer)</h3><p>Just as we did during the Java section of this post, we need to load the data set into our MongoDB database. If you have already completed this step as part of this blog post and you intend to use the same database, you can skip ahead to Step 7.</p>
<p>The first thing you want to do is download a JSON file that has all the data that we want to return. You can grab this at the following URL:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http<span class="variable">s:</span>//<span class="keyword">dl</span>.dropboxusercontent.<span class="keyword">com</span>/<span class="keyword">u</span>/<span class="number">72466829</span>/beers.json</span><br></pre></td></tr></table></figure>
<p>Once you have the data set downloaded, simply load it into your database using the mongoimport command as shown below:</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mongoimport --jsonArray -<span class="keyword">d</span> yourDBName -c beers --<span class="keyword">type</span> json --<span class="keyword">file</span> /tmp/beers.json -<span class="keyword">h</span> yourMongoHost --port yourMongoPort -<span class="keyword">u</span> yourMongoUsername -p yourMongoPassword</span><br></pre></td></tr></table></figure>
<p>You should see the following results:<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">connected to: 127.6.189.2:27017</span><br><span class="line">Tue Jun 10 20:09:55.436<span class="instruction"> check </span>9 24</span><br><span class="line">Tue Jun 10 20:09:55.437 imported 24 objects</span><br><span class="line">Step 7: Creating our Beer model</span><br></pre></td></tr></table></figure></p>
<p>A model can be thought of in the same terms as you think about models in Java land. It is a representation of an Object which in this case is beer. LoopBack provides a convenient way to create model objects by using the command line. Open up your terminal window, go to the project folder and issue the following command:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="tag">slc</span> <span class="rule"><span class="attribute">loopback</span>:<span class="value">model</span></span></span><br></pre></td></tr></table></figure>
<p>This will begin an interactive session where you can define your model. The first thing that will be asked is the model name. Let’s call that “beer”. It will prompt for the datasource this model should be attached to and we should select the myMongo datasource we just created.</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">[<span class="keyword">?</span>] Enter the model name: beer</span><br><span class="line"><span class="list">[<span class="keyword">?</span>] Select the data-source to attach beer to:</span><br><span class="line">db <span class="list">(<span class="keyword">memory</span>)</span></span><br><span class="line">❯ myMongo <span class="list">(<span class="keyword">mongodb</span>)</span></span></span></span><br></pre></td></tr></table></figure>
<p>We then get prompted if this API should be exposed over REST. Of course we want to do that.<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr_selector">[?]</span> <span class="tag">Expose</span> <span class="tag">beer</span> <span class="tag">via</span> <span class="tag">the</span> <span class="tag">REST</span> <span class="tag">API</span>? <span class="tag">Yes</span></span><br></pre></td></tr></table></figure></p>
<p>Finally a web plural name for your model. Since our model is called beer, the plural is beers (which is the default). To accept this default, simply hit the enter key.</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">[<span class="keyword">?</span>] Custom plural form <span class="list">(<span class="keyword">used</span> to build REST URL)</span>:</span></span><br></pre></td></tr></table></figure>
<p>The next thing that you will be asked is to define the properties of your model. For this sample application, we are interested in the name and description of the beer.<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter an empty <span class="keyword">property</span> <span class="property">name</span> when done.</span><br><span class="line">[?] Property <span class="property">name</span>: <span class="property">name</span></span><br></pre></td></tr></table></figure></p>
<p>Once you hit enter, you will be asked to provide the data type for each property specified. The first item will be name and we want to select that it is of type string. Select string and press the enter key.<br><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">[</span>?] Property type:<span class="function"> (</span>Use arrow keys<span class="function">)</span></span><br><span class="line">❯ string</span><br><span class="line">number</span><br><span class="line">boolean</span><br><span class="line">object<span class="instruction"></span><br><span class="line">array</span><br><span class="line"></span>date</span><br><span class="line">buffer</span><br><span class="line">geopoint</span><br><span class="line">(other<span class="function">)</span></span><br></pre></td></tr></table></figure></p>
<p>You can then create similarly the description property and will then be asked to specify the type. This is also a string so select that option and press enter.</p>
<p>Let’s add another beer property.<br>Enter an empty property name when done.<br>[?] Property name: description<br>invoke loopback:property<br>[?] Property type: string<br>[?] Required? Yes</p>
<p>Congratulations! you have just created your first model object using LoopBack in conjunction with Node. To see what was actually created under the covers, open up the beer.json file that is located in the root/common/models of your application directory. Scroll to the very bottom of the file and you will see the following model:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> "<span class="attribute">name</span>": <span class="value"><span class="string">"beer"</span></span>,</span><br><span class="line"> "<span class="attribute">base</span>": <span class="value"><span class="string">"PersistedModel"</span></span>,</span><br><span class="line"> "<span class="attribute">properties</span>": <span class="value">&#123;</span><br><span class="line">   "<span class="attribute">name</span>": <span class="value">&#123;</span><br><span class="line">     "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>,</span><br><span class="line">     "<span class="attribute">required</span>": <span class="value"><span class="literal">true</span></span><br><span class="line">   </span>&#125;</span>,</span><br><span class="line">   "<span class="attribute">description</span>": <span class="value">&#123;</span><br><span class="line">     "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>,</span><br><span class="line">     "<span class="attribute">required</span>": <span class="value"><span class="literal">true</span></span><br><span class="line">   </span>&#125;</span><br><span class="line"> </span>&#125;</span>,</span><br><span class="line"> "<span class="attribute">validations</span>": <span class="value">[]</span>,</span><br><span class="line"> "<span class="attribute">relations</span>": <span class="value">&#123;&#125;</span>,</span><br><span class="line"> "<span class="attribute">acls</span>": <span class="value">[]</span>,</span><br><span class="line"> "<span class="attribute">methods</span>": <span class="value">[]</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<p>As you can see, we have a model created and the name as well as the description properties are assigned to the model.</p>
<p>In the /server/model-config.js you will notice we also have some additional fields including public and datasource. The public field specifies that we want to expose this model to the world via a REST web service. The datasource field specifies the datasource that this model will use for CRUD operations.</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"beer"</span>: &#123;</span><br><span class="line">  <span class="string">"dataSource"</span>: <span class="string">"myMongo"</span>,</span><br><span class="line">  <span class="string">"public"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Step 8: Bask in the joy of viewing beers</p>
<p>Congratulations! You have just created your first Node.js application that includes a REST web service for retrieving information about beer! The last thing we need to do is deploy the application. Fortunately, this is a very easy task and can be performed with the following command that should be executed from your application’s root directory:</p>
<p>$ slc run</p>
<p>Once the application is running, verify that is working by going to the following URL with your web browser:</p>
<p>``<br><a href="http://0.0.0.0:3000/api/beers" target="_blank" rel="external">http://0.0.0.0:3000/api/beers</a><br><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="livecodeserver">LoopBack also includes <span class="operator">an</span> explorer application that will allow you <span class="built_in">to</span> view all <span class="operator">of</span> <span class="operator">the</span> services available <span class="keyword">for</span> your application, including <span class="operator">the</span> Beer model <span class="operator">and</span> REST service that we created. To use this explorer, point your browser <span class="built_in">to</span> <span class="operator">the</span> following <span class="built_in">URL</span>:</span><br><span class="line"></span><br><span class="line">``</span><br><span class="line"><span class="keyword">http</span>://<span class="number">0.0</span>.0.0:<span class="number">3000</span>/explorer</span></span><br></pre></td></tr></table></figure></p>
<p>Once the page has loaded, you will be presented with the following screen where I have highlighted the /beers endpoint that we created as part of this blog post:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explorer1</span><br></pre></td></tr></table></figure>
<p>You can click on the /beers endpoint to expand the available API calls that can be made and even test a few out as shown in the following image:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explorer2</span><br></pre></td></tr></table></figure></p>
<p>Conclusion<br>In this blog post I showed you how to create a REST based web service using Java EE. This service returned a list of beers from the fantastic Pabst Brewing Company. After we created the Java EE application, we then created the same application using LoopBack and Node. With very little code, we were able to create a REST web service that returns the name and description of our beers. On top of that, the LoopBack API also provides default actions for the entire CRUD process.</p>

            
        </div>
    </div>
    <footer class="article-footer">
        <a data-url="http://ricston.co.uk/wiki/Node-for-the-Java-Developer.html" data-id="ciafjfdq4001f0s6dmig3tgmr" class="article-share-link">Share</a>
        
        
    </footer>
    
    
    

    <div class="container">
    <div class="row">

        <div class="col-sm-8">
            <h3 class="noSubtitle">Get in touch</h3>
        </div>
        <!--<div class="col-sm-12">-->
        <!--<div id="mapWrapper" class="mb30"></div>-->
        <!--</div>-->

        <div class="col-sm-8">
            <form method="post" action="" id="contactfrm" role="form">

                <div class="col-sm-6">
                    <img src="/images/CONTACT-MULE.png" width="140px"/>
                    <h4>Address:</h4>
                    <address>
                        <b>Ricston UK Ltd</b><br/>
                        Unit 5, 520 Chiswick High Rd.<br/>
                        London, W4 5RG <br/>
                    </address>
                    <h4>Phone:</h4>
                    <address>
                        +44 (0)20 719 351 07 <br/>
                    </address>
                    <h4>Mobile:</h4>
                    <address>
                        +44 (0)78 732 938 96<br/>
                    </address>
                    <hr/>
                    <address>
                        <b>Ricston Malta Ltd</b><br/>
                        Northfields, Suite 4, Independence Avenue, <br/>
                        Mosta, MST9026, Malta <br/>
                    </address>
                    <h4>Phone:</h4>
                    <address>
                        +356 2133 4457 <br/>
                    </address>
                    <h4>Fax:</h4>
                    <address>
                        +356 2133 4156<br/>
                    </address>

                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Enter name"
                               title="Please enter your name (at least 2 characters)"/>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" class="form-control" name="email" id="email" placeholder="Enter email"
                               title="Please enter a valid email address"/>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input name="phone" class="form-control required digits" type="tel" id="phone" size="30"
                               value="" placeholder="Enter phone"
                               title="Please enter a valid phone number (at least 10 characters)">
                    </div>
                    <div class="form-group">
                        <label for="comments">Comments</label>
                            <textarea name="comment" class="form-control" id="comments" cols="3" rows="5"
                                      placeholder="Enter your message…"
                                      title="Please enter your message (at least 10 characters)"></textarea>
                    </div>
                    <div class="col-md-8 col-md-offset-6">
                        <div class="result"></div>
                        <button name="submit" type="submit" class="btn btn-md" id="submit"> Submit</button>
                    </div>
                    <!--<fieldset class="clearfix securityCheck">-->
                    <!--<legend>Security</legend>-->
                    <!--<div class="form-group">-->
                    <!--<input class="required form-control" id="verify" name="verify" type="text">-->
                    <!--</div>-->
                    <!--</fieldset>-->
                </div>

            </form>
        </div>
    </div>
</div>

    </div>



</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-Dart/">Angular Dart</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elastic-Search/">Elastic Search</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fluentd/">Fluentd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logstash/">Logstash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acid/">acid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-processing/">data_processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devOps/">devOps</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grails/">grails</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/groovy/">groovy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mean/">mean</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/">mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongo/">mongo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgress/">postgress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/richard-donovan/">richard.donovan</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">spark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/upgrade/">upgrade</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular-Dart/" style="font-size: 10px;">Angular Dart</a><a href="/tags/Docker/" style="font-size: 10px;">Docker</a><a href="/tags/ELK/" style="font-size: 10px;">ELK</a><a href="/tags/Elastic-Search/" style="font-size: 10px;">Elastic Search</a><a href="/tags/Fluentd/" style="font-size: 10px;">Fluentd</a><a href="/tags/Logstash/" style="font-size: 10px;">Logstash</a><a href="/tags/acid/" style="font-size: 10px;">acid</a><a href="/tags/angular/" style="font-size: 10px;">angular</a><a href="/tags/apache/" style="font-size: 10px;">apache</a><a href="/tags/ci/" style="font-size: 10px;">ci</a><a href="/tags/data-processing/" style="font-size: 10px;">data_processing</a><a href="/tags/devOps/" style="font-size: 10px;">devOps</a><a href="/tags/docker/" style="font-size: 10px;">docker</a><a href="/tags/express/" style="font-size: 10px;">express</a><a href="/tags/grails/" style="font-size: 10px;">grails</a><a href="/tags/groovy/" style="font-size: 10px;">groovy</a><a href="/tags/javascript/" style="font-size: 10px;">javascript</a><a href="/tags/json/" style="font-size: 10px;">json</a><a href="/tags/mean/" style="font-size: 10px;">mean</a><a href="/tags/mobile/" style="font-size: 10px;">mobile</a><a href="/tags/mongo/" style="font-size: 10px;">mongo</a><a href="/tags/node/" style="font-size: 15px;">node</a><a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a><a href="/tags/postgress/" style="font-size: 10px;">postgress</a><a href="/tags/richard-donovan/" style="font-size: 20px;">richard.donovan</a><a href="/tags/spark/" style="font-size: 10px;">spark</a><a href="/tags/upgrade/" style="font-size: 10px;">upgrade</a><a href="/tags/windows/" style="font-size: 10px;">windows</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/2015/06/">June 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/2015/05/">May 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/2015/04/">April 2015</a><span class="archive-list-count">12</span></li></ul>
    </div>
  </div>

  
    
  <div class="">
    <div class="">
      <ul>
        
          <li>
            <a href="/blog/Tools/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/blog/Rancher-and-Docker-Tutorial/">Rancher and Docker Tutorial</a>
          </li>
        
          <li>
            <a href="/blog/Build-Grails-Applications-with-TeamCity/">Build Grails Applications with TeamCity</a>
          </li>
        
          <li>
            <a href="/blog/Upgrading-from-Grails-2-x-to-Grails-3/">Upgrading from Grails 2.x to Grails 3</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
    </div>
    <!-- footer from layout -->
    <footer id="footer">
    
    <div class="outer">
        <div id="footer-info" class="inner">
            <div class="row">
                <div class="col-md-4">
                    &copy; 2015 Ricston Ltd<br>
                    Powered by <a href="https://nodejs.org/">Nodejs</a> and <a href="http://hexo.io/"
                                                                               target="_blank">Hexo</a>
                </div>
                <div class="col-md-6 right text-right">
                    <h2>
                        <a href="https://www.linkedin.com/company/ricston-ltd" target="_blank"><i class="fa fa-linkedin"></i></a> &nbsp
                    <a href="https://www.facebook.com/ricston" target="_blank"><i class="fa fa-facebook"></i></a> &nbsp
                    <a href="https://twitter.com/ricston"><i class="fa fa-twitter"></i></a> &nbsp
                    <a href="https://www.facebook.com/ricston"><i class="fa fa-google-plus"></i></a> &nbsp
                    <a href="#"><i class="fa fa-rss"></i></a></h2>
                </div>
            </div>
        </div>
    </div>
</footer>
    




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>