<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Cache-control" content="public">
    <meta http-equiv="Age" content="86400">
    <meta http-equiv="Content-Encoding" content=”gzip”/>
    


    <title>
        
        Ricston UK Ltd - The Integration nijas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="About database-designDatabase design is the process of specifying the logical and/or physical parts of a database. The goal of database design is to make a representation of some “universe of discours">
<meta property="og:type" content="website">
<meta property="og:title" content="Ricston UK Ltd - The Integration nijas">
<meta property="og:url" content="http://ricston.co.uk/tech/database-design.html">
<meta property="og:site_name" content="Ricston UK Ltd - The Integration nijas">
<meta property="og:description" content="About database-designDatabase design is the process of specifying the logical and/or physical parts of a database. The goal of database design is to make a representation of some “universe of discours">
<meta property="og:updated_time" content="2015-05-19T16:12:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ricston UK Ltd - The Integration nijas">
<meta name="twitter:description" content="About database-designDatabase design is the process of specifying the logical and/or physical parts of a database. The goal of database design is to make a representation of some “universe of discours">
    
    <link rel="alternative" href="/atom.xml" title="Ricston UK Ltd - The Integration nijas" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.png">
    
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    


    <!-- Bootstrap  -->
    <link type="text/css" rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.4/custom/bootstrap.min.css">
    <!-- web font  -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,800" rel="stylesheet" type="text/css">
    <!-- plugin css  -->
    <link rel="stylesheet" type="text/css" href="/css/animate.css"/>
    <!--<link rel="stylesheet" type="text/css" href="/css/magnific-popup.css"/>-->
    <!--<link type="text/css" rel="stylesheet" href="/css/isotype_style.css">-->
    <link rel="stylesheet" type="text/css" href="/css/flexslider.css"/>
    <link rel="stylesheet" type="text/css" href="/css/pageslide/jquery.pageslide.css"/>
    <!-- Owl carousel-->
    <link rel="stylesheet" href="/owl.carousel/owl.carousel.css">
    <link rel="stylesheet" href="/owl.carousel/owl.theme.css">
    <link rel="stylesheet" href="/owl.carousel/owl.transitions.css">
    <link rel="stylesheet" href="/bower_components/fontawesome/css/font-awesome.css"/>
    <!-- Custom css -->
    <link type="text/css" rel="stylesheet" href="/css/layout.css">
    <link type="text/css" id="colors" rel="stylesheet" href="/css/colors.css">
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>


</head>
<body>
<!-- globalWrapper -->
<div id="globalWrapper" class="localscroll">
<!-- header -->
<header id="mainHeader" class="navbar-fixed-top" role="banner">
    <div class="container">
        <nav class="navbar navbar-default scrollMenu" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span> <span
                            class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/index.html"><img width="180px" src="/images/ricstonLogoNew2.gif" alt="Ricston Logo"/></a></div>
            <div class="collapse navbar-collapse navbar-ex1-collapse" id="scrollTarget">
                <ul class="nav navbar-nav pull-right">
                    <li class="active"><a href="/"><i class="fa fa-home"></i>Home</a></li>
                    <li id="services"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"  aria-expanded="false">
                            <i class="fa fa-thumbs-up"></i>Services</a>
                        <!--<span class="caret"></span>-->
                        <!--</a>-->
                        <ul class="dropdown-menu right" role="menu">
                            <li class="customMenu"><a href="/#services">Our Services</a></li>
                            <li class="customMenu"><a href="/tech/#Mule">Mule Integration</a></li>
                            <li class="customMenu"><a href="/tech/#Open Source">Open Source</a></li>
                            <li class="customMenu"><a href="/tech/java.html">Java</a></li>
                            <li class="customMenu"><a href="/tech/#Migration">Migration</a></li>
                            <li class="customMenu"><a href="/tech/#DevOps">Dev Ops</a></li>
                            <li class="customMenu"><a href="/tech/#Testing">Testing</a></li>
                            <li class="customMenu"><a href="/tech/#Db Design">DB Design</a></li>
                            <li class="customMenu"><a href="/tech/#Big Data">Big Data</a></li>
                            <li class="customMenu"><a href="/tech/#Micro Services">Micro Services</a></li>
                            <li class="customMenu"><a href="/tech/#Apis">Apis</a></li>
                        </ul></li>
                    <li><a href="/#about"><i class="fa fa-question"></i>About Us</a></li>
                    <li id="industries"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-expanded="false"><i
                                    class="fa fa-paperclip"></i>Industries</a>
                        <ul class="dropdown-menu" role="menu">
                            <li class="customMenu"><a href="/industries/">Industries</a></li>
                            <li class="customMenu"><a href="/industries/#Media_&_Telecom">Telecoms & Media</a></li>
                            <li class="customMenu"><a href="/industries/#Retail">Retail</a></li>
                            <li class="customMenu"><a href="/industries/#Finance">Finance</a></li>
                            <li class="customMenu"><a href="/industries/#Government">Government</a></li>
                        </ul>
                    </li>
                    <li id="works"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-expanded="false"><i class="fa fa-align-justify"></i>Works</a>
                        <ul class="dropdown-menu" role="menu">
                            <li class="customMenu"><a href="/#Works">Projects</a></li>
                            <li class="customMenu"><a href="/presentations">Presentations</a></li>
                            <li class="customMenu"><a href="/blog">Tech Blog</a></li>
                            <li class="customMenu"><a href="http://ricston.com/blog">Mule Blog</a></li>
                            <li class="customMenu"><a href="/wiki/index.html">Wiki</a></li>
                        </ul>
                    </li>
                    <li id="people"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                       aria-expanded="false"><i class="fa fa-users"></i>Our Team</a>
                        <ul class="dropdown-menu" role="menu">
                            <li class="customMenu"><a href="/#team">Our Team</a></li>
                            <li class="customMenu"><a href="/careers">Careers</a></li>
                        </ul>
                    </li>
                    <li><a href="/#contactSlice"><i class="fa fa-mail-reply"></i>Contact</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>
<!-- header variables -->
 <!--404.html-->
 <!---->
 <!--404.html-->
 <!--404.html-->
 <!--/home/richard/workspace/workspace_ricston/ricston_site/source/404.html-->
 <!---->


<script type="application/javascript">
    $(document).ready(function(){
//        alert ("got updated page   " );
        if ( document.location.pathname.startsWith("/tech")){
            $('.active').attr("class", "");
            $('li#works').attr("class","active");
        } else  if ( document.location.pathname.startsWith("/services") ){
            $('.active').attr("class", "");
            $('li#services').attr("class","active");
        }  else  if ( document.location.pathname.startsWith("/caseStudies")) {
            $('.active').attr("class", "");
            $('li#services').attr("class", "active");
        }  else  if ( document.location.pathname.startsWith("/careers")) {
            $('.active').attr("class", "");
            $('li#people').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/industries")) {
            $('.active').attr("class", "");
            $('li#industries').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/blog")) {
            $('.active').attr("class", "");
            $('li#works').attr("class", "active");
        }  else  if ( document.location.pathname.startsWith("/people")) {
            $('.active').attr("class", "");
            $('li#people').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/wiki")) {
            $('.active').attr("class", "");
            $('li#works').attr("class", "active");
        } else  if ( document.location.pathname.startsWith("/presentations")) {
            $('.active').attr("class", "");
            $('li#works').attr("class", "active");
        }
    });
</script>

<!-- header -->
  <div class="container" id="">
    <!--<div id="wrap">-->
      <div class="">
        <section id="main"><article id="page-undefined" class="article article-type-page col-md-20" itemscope
         itemprop="blogPost">
    <div class="article-meta">
        <a href="/tech/database-design.html" class="article-date">
  <time datetime="2015-06-02T16:17:28.813Z" itemprop="datePublished">2015-06-02</time>
</a>
        
    </div>
    <div class="article-inner">
        
        
        <div class="article-entry" itemprop="articleBody">
            
            <h2 id="About_database-design">About database-design</h2><p>Database design is the process of specifying the logical and/or physical parts of a database. The goal of database design is to make a representation of some “universe of discourse” - the types of facts, business rules and other requirements that the database is intended to model.</p>
<p>The result of <a href="http://en.wikipedia.org/wiki/Database_design" target="_blank" rel="external">database design</a> is a plan for the construction of a database as a model of the Universe of Discourse (the “business domain” or subject area about which information will be recorded in the database).</p>
<p>Most databases that capture and manage semi-permanent data operate under the control of a database management system (DBMS). Prominent DBMS products are Microsoft’s SQL Server, Oracle DBMS, and IBM’s DB2. There are dozens of others. Many of the questions and answers you’ll find under this tag relate to one of these DBMS products, but some design issues are DBMS independent.</p>
<p>The amount of preparation and education you’ll need before building your first successful database varies widely depending on many factors. Among other factors, it depends on how ambitious your database project is and on what prior experience you bring to bear on the project. Very experienced programmers sometimes underestimate the amount of material there is to learn about database design.</p>
<p>Sometimes programmers learn well by trial and error, or by postponing formal learning until their second or third project. Other times, database design neophytes make design decisions that lead into pitfalls that are very difficult to reverse.</p>
<p>There are many ways to measure the quality of a database design. Programmers building their first database are often primarily concerned with performance. There’s no question that performance is important. A bad design can easily result in database operations that take ten to a hundred times as much time as they should.</p>
<p>But don’t let performance issues blind you to other aspects of good design. In particular, future proofing of a database is enormously important. Failure to do this can result in a database that traps its users at the first level and prevents their data from evolving as their needs evolve.</p>
<p>Another aspect involves separating out the hidden features of a database (sometimes called physical design) from the public features visible across the application interface (sometimes called logical design). A neat separation of these features can result a database that can be tweaked and tuned quite a bit with no changes to application code. A poor separation of these features can result in a database that makes a nightmare out of application development or database administration.</p>
<p>Another consideration is whether the proposed database will be embedded within a single application, or whether it will be an information hub that serves the needs of multiple applications. Some design decisions will be made very differently in these two cases.</p>
<p>Yet another consideration is whether the application is going to perform all data management functions on behalf of its clients, or whether custodial responsibility for the database and its data is going to be vested in one or more DBAs (database administrators).</p>
<hr>
<p><strong>What kinds of questions will appear in the database-design tag?</strong></p>
<p>You’ll see a lot of questions about table design, data normalization, index design, query optimization, constraint declarations, and keys. A lot of questions, and many of the responses will address issues of speed or performance. There will be a lot of questions about key selection.</p>
<p>Most of the questions are about relational databases, including the SQL databases that are commonly called relational. A few questions are about “truly relational” databases or about “non-relational” or “post-relational” databases. A few are about semistructured or unstructured data.</p>
<p>A lot of questions tagged “database design” will also be tagged “data modeling”. There is a huge overlap between the two subjects.</p>
<p>You’ll see a lot of questions on the subject of table composition and decomposition. Closely related to table decomposition is the concept of data normalization. Indeed, many responders treat table decomposition and data normalization as though they are synonymous terms. They aren’t quite synonymous. Nearly all improvements in data normalization result in table decomposition, but there are plenty of ways of decomposing tables that have nothing to do with normalization.</p>
<p>Data normalization is a brand new topic to many neophyte database designers. It’s worth learning the rudiments of data normalization, even if the database you are building is small and simple. It’s also sometimes worthwhile to disregard the rules of data normalization, but you really have to know what you are doing.</p>
<p>You’ll also see a lot of questions on the subject of index design. Closely related to index design is query optimization. Many questions about either index design or query design have to do with how much effort the programmer should expend in getting the very best result out of the optimizer.</p>
<p>Three things are worth keeping in mind. First, optimization is often a matter of tradeoffs. Sometimes organizing things for rapid query will slow down data updates. Sometimes speed really matters in some database operations, but not others.</p>
<p>Second, you really need to pay attention to those things that slow operations down from seconds to minutes, or from minutes to hours, before you worry about 10% improvements.</p>
<p>Third, database delays vary enormously as the volume of data increases and as the number of concurrent users increases. Simple tests with one user and sample data can really mislead you about speed in a production environment.</p>
<hr>
<p>What are common database development mistakes?</p>
<p><strong>1. Not using appropriate indices</strong></p>
<p>This is a relatively easy one, but it still it happens all the time. Foreign keys should have indexes on them. If you’re using a field in a <code>WHERE</code> you should (probably) have an index on it. Such indexes should often cover multiple columns based on the queries you need to execute.</p>
<p><strong>2. Not enforcing referential integrity</strong></p>
<p>Your database may vary here, but if your database supports referential integrity - meaning that all foreign keys are guaranteed to point to an entity that exists - you should be using it.</p>
<p>It’s quite common to see this failure on MySQL databases.</p>
<p>More here:</p>
<ul>
<li><em><a href="http://stackoverflow.com/questions/382309" target="_blank" rel="external">How important are constraints like NOT NULL and FOREIGN KEY if I’ll always control my database input with PHP?</a></em></li>
<li><em><a href="http://stackoverflow.com/questions/18717" target="_blank" rel="external">Are foreign keys really necessary in a database design?</a></em></li>
</ul>
<p><strong>3. Missing or inappropriately chosen keys</strong></p>
<p>Keys are a fundamental part of database design and data integrity. Poorly chosen keys, failure to implement keys or misunderstandings about keys are very common problems and topics of discussion. The relative merits and use of surrogate and natural keys is just one aspect. Surrogate and natural keys can both be useful tools when applied correctly but they have distinct features and functions and one key cannot necessarily be regarded as a substitute for or alternative to another. Some relevant questions and answers are:</p>
<ul>
<li><em><a href="http://stackoverflow.com/questions/404040" target="_blank" rel="external">How do you like your primary keys?</a></em></li>
<li><em><a href="http://stackoverflow.com/questions/337503" target="_blank" rel="external">What’s the best practice for primary keys in tables?</a></em></li>
<li><em><a href="http://stackoverflow.com/questions/506164" target="_blank" rel="external">Use item specific prefixes and autonumber for primary keys?</a></em></li>
<li><em><a href="http://stackoverflow.com/questions/63090" target="_blank" rel="external">Surrogate vs. natural/business keys</a></em></li>
<li><em><a href="http://stackoverflow.com/questions/166750" target="_blank" rel="external">Should I have a dedicated primary key field?</a></em></li>
</ul>
<p><strong>4. Writing queries that require <code>DISTINCT</code> to work</strong></p>
<p>You often see this in ORM-generated queries. Look at the log output from <a href="http://en.wikipedia.org/wiki/Hibernate_%28Java%29" target="_blank" rel="external">Hibernate</a> and you’ll see all the queries begin with:</p>
<pre><code><span class="keyword">SELECT</span> DISTINCT <span class="attribute">...</span>
</code></pre><p>This is a bit of a shortcut to ensuring you don’t return duplicate rows and thus get duplicate objects. You’ll sometimes see people doing this as well. If you see it too much it’s a real red flag. Not that <code>DISTINCT</code> is bad or doesn’t have valid applications. It does (on both counts), but it’s not a surrogate or a stopgap for writing correct queries.</p>
<p>From <a href="http://weblogs.sqlteam.com/markc/archive/2008/11/11/60752.aspx" target="_blank" rel="external">Why I Hate DISTINCT</a>:</p>
<blockquote>
<p>Where things start to go sour in my opinion is when a developer is building substantial query, joining tables together, and all of a sudden he realizes that it <strong>looks</strong> like he is getting duplicate (or even more) rows and his immediate response… his “solution” to this “problem” is to throw on the DISTINCT keyword and <strong>POOF</strong> all his troubles go away.</p>
</blockquote>
<p><strong>5. Favoring aggregation over joins</strong></p>
<p>Another common mistake is to not realize how much more expensive aggregation (that is, the <code>GROUP BY</code> clause) can be compared to joins.</p>
<p>For example:</p>
<p>From <a href="http://stackoverflow.com/questions/477006" target="_blank" rel="external">SQL statement - “join” vs “group by and having”</a>:</p>
<blockquote>
<p>First query:</p>
<pre><code><span class="operator"><span class="keyword">SELECT</span> userid
<span class="keyword">FROM</span> userrole
<span class="keyword">WHERE</span> roleid <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)
<span class="keyword">GROUP</span> <span class="keyword">by</span> userid
<span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(<span class="number">1</span>) = <span class="number">3</span></span>
</code></pre><p>Query time: 0.312 s</p>
<p>Second query:</p>
<pre><code>SELECT t1<span class="class">.userid</span>
FROM userrole t1
JOIN userrole t2 ON t1<span class="class">.userid</span> = t2<span class="class">.userid</span> AND t2<span class="class">.roleid</span> = <span class="number">2</span>
JOIN userrole t3 ON t2<span class="class">.userid</span> = t3<span class="class">.userid</span> AND t3<span class="class">.roleid</span> = <span class="number">3</span>
AND t1<span class="class">.roleid</span> = <span class="number">1</span>
</code></pre><p>Query time: 0.016 s</p>
<p>That’s right. The join version I proposed is <strong>twenty times faster than the aggregate version.</strong></p>
</blockquote>
<p><strong>6. Not simplifying complex queries through views</strong></p>
<p>Not all database vendors support views but for those that do, they can greatly simplify queries if used judiciously. As an example, consider a <a href="http://www.tdan.com/view-articles/5014/" target="_blank" rel="external">generic Party model</a> for CRM. This is an extremely powerful and flexible modeling technique, but it can lead to many joins. In this model there were:</p>
<ul>
<li><strong>Party</strong>: people and organizations;</li>
<li><strong>Party Role</strong>: things those parties did, for example Employee and Employer;</li>
<li><strong>Party Role Relationship</strong>: how those roles related to each other.</li>
</ul>
<p>Example:</p>
<ul>
<li>Ted is a Person, being a subtype of Party;</li>
<li>Ted has many roles, one of which is Employee;</li>
<li>Intel is an organization, being a subtype of a Party;</li>
<li>Intel has many roles, one of which is Employer;</li>
<li>Intel employs Ted, meaning there is a relationship between their respective roles.</li>
</ul>
<p>So there are five tables joined to link Ted to his employer. We assume all employees are Persons (not organizations) and provide this helper view:</p>
<pre><code>CREATE VIEW vw_employee AS
SELECT <span class="tag">p</span><span class="class">.title</span>, <span class="tag">p</span><span class="class">.given_names</span>, <span class="tag">p</span><span class="class">.surname</span>, <span class="tag">p</span><span class="class">.date_of_birth</span>, p2<span class="class">.party_name</span> employer_name
FROM person <span class="tag">p</span>
JOIN party py ON py<span class="class">.id</span> = <span class="tag">p</span><span class="class">.id</span>
JOIN party_role child ON <span class="tag">p</span><span class="class">.id</span> = child<span class="class">.party_id</span>
JOIN party_role_relationship prr ON child<span class="class">.id</span> = prr<span class="class">.child_id</span> AND prr<span class="class">.type</span> = <span class="string">'EMPLOYMENT'</span>
JOIN party_role parent ON parent<span class="class">.id</span> = prr<span class="class">.parent_id</span> = parent<span class="class">.id</span>
JOIN party p2 ON parent<span class="class">.party_id</span> = p2.id
</code></pre><p>And suddenly we have a very simple view of the data you want, but on a highly flexible data model.</p>
<p><strong>7. Not sanitizing input</strong></p>
<p>This is a huge one. If you don’t know what you’re doing it’s really easy to create sites vulnerable to attack. Nothing sums it up better than the <a href="http://xkcd.com/327/" target="_blank" rel="external">story of little Bobby Tables</a>.</p>
<p>Data provided by the user by way of URLs, form data <strong>and cookies</strong> should always be treated as hostile and be sanitized. Make sure you’re getting what you expect.</p>
<p><strong>8. Not using prepared statements</strong></p>
<p>Prepared statements are when you compile a query minus the data used in inserts, updates and <code>WHERE</code> clauses and then supply that later. For example:</p>
<pre><code><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username = <span class="string">'bob'</span>
</code></pre><p>vs</p>
<pre><code><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username = ?
</code></pre><p>or</p>
<pre><code><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username = :username
</code></pre><p>depending on your platform.</p>
<p>Basically, each time any modern database encounters a new query it has to compile it. If it encounters a query it’s seen before, you’re giving the database the opportunity to cache the compiled query and the execution plan. By doing the query a lot you’re giving the database the opportunity to figure that out and optimize accordingly (for example, by pinning the compiled query in memory).</p>
<p>Using prepared statements will also give you meaningful statistics about how often certain queries are used.</p>
<p>Prepared statements will also better protect you against <a href="http://en.wikipedia.org/wiki/SQL_injection" target="_blank" rel="external">SQL injection</a> attacks.</p>
<p><strong>9. Not normalizing enough</strong></p>
<p><a href="http://en.wikipedia.org/wiki/Database_normalization" target="_blank" rel="external">Database normalization</a> is the process of optimizing database design, or how you organize your data into tables.</p>
<p>As an example, consider code where someone implodes an array and inserts it into a single field in a database. Normalizing this would be to treat each element of the array as a separate row in a child table (that is, a one-to-many relationship).</p>
<p>This came up in <em><a href="http://stackoverflow.com/questions/620645" target="_blank" rel="external">Best method for storing a list of user IDs</a></em>:</p>
<blockquote>
<p>I’ve seen in other systems that the list is stored in a serialized PHP array.</p>
</blockquote>
<p>But lack of normalization comes in many forms.</p>
<p>More:</p>
<ul>
<li><em><a href="http://articles.techrepublic.com.com/5100-10878_11-6140413.html" target="_blank" rel="external">Normalization: How far is far enough?</a></em></li>
<li><em><a href="http://www.sqlmag.com/Article/ArticleID/4887/sql_server_4887.html" target="_blank" rel="external">SQL by Design: Why You Need Database Normalization</a></em></li>
</ul>
<p><strong>10. Normalizing too much</strong></p>
<p>This may seem like a contradiction to the previous point but normalization, like many things, is a tool. It is a means to an end and not an end in and of itself. Many developers forget this and start treating a “means” as an “end”. <a href="http://en.wikipedia.org/wiki/Unit_testing" target="_blank" rel="external">Unit testing</a> is a prime example of this.</p>
<p>Careful and considered de-normalization can have huge performance benefits, but you have to be really careful when doing this.</p>
<p>More:</p>
<ul>
<li><em><a href="http://www.selikoff.net/blog/2008/11/19/why-too-much-database-normalization-can-be-a-bad-thing/" target="_blank" rel="external">Why too much Database Normalization can be a Bad Thing</a></em></li>
<li><em><a href="http://stackoverflow.com/questions/496508" target="_blank" rel="external">How far to take normalization in database design?</a></em></li>
<li><em><a href="http://www.25hoursaday.com/weblog/CommentView.aspx?guid=cc0e740c-a828-4b9d-b244-4ee96e2fad4b" target="_blank" rel="external">When Not to Normalize your SQL Database</a></em></li>
<li><em><a href="http://www.codinghorror.com/blog/archives/001152.html" target="_blank" rel="external">Maybe Normalizing Isn’t Normal</a></em></li>
<li><em><a href="http://highscalability.com/mother-all-database-normalization-debates-coding-horror" target="_blank" rel="external">The Mother of All Database Normalization Debates on Coding Horror</a></em></li>
</ul>
<p>The trouble with following advice to “denormalize” is that it doesn’t tell you what to do. It’s like trying to get to <a href="https://en.wikipedia.org/wiki/Los_Angeles" target="_blank" rel="external">Los Angeles</a> by driving away from <a href="http://en.wikipedia.org/wiki/Chicago" target="_blank" rel="external">Chicago</a>. You could end up almost anywhere. A better plan is to find another design discipline that will function as an alternative to normalization, with different design goals. One such alternative is <a href="http://en.wikipedia.org/wiki/Star_schema" target="_blank" rel="external">star schema</a> design. Star schema design is widely used in <a href="https://en.wikipedia.org/wiki/Data_warehouse" target="_blank" rel="external">data warehousing</a> and reporting databases, where speed and ease of querying outweighs simplicity of update. There is another alternative, called <a href="http://en.wikipedia.org/wiki/Snowflake_schema" target="_blank" rel="external">snowflake design</a> which looks sort of like a compromise between star schema and normalized design.</p>
<p><strong>11. Using exclusive arcs</strong></p>
<p>An exclusive arc is a common mistake where a table is created with two or more foreign keys where one and only one of them can be non-null. For one thing, it becomes that much harder to maintain data integrity. After all, even with referential integrity, nothing is preventing two or more of these foreign keys from being set (complex check constraints notwithstanding).</p>
<p><strong>12. Not doing performance analysis on queries at all</strong></p>
<p>Pragmatism reigns supreme, particularly in the database world. If you’re sticking to principles to the point that they’ve become a dogma then you’ve quite probably made mistakes. Take the example of the aggregate queries from above. The aggregate version might look “nice”, but its performance is woeful. A performance comparison should’ve ended the debate (but it didn’t), but more to the point: spouting such ill-informed views in the first place is ignorant, even dangerous.</p>
<p><strong>13. Over-reliance on UNION ALL and particularly UNION constructs</strong></p>
<p>A UNION in SQL terms merely concatenates congruent data sets, meaning they have the same type and number of columns. The difference between them is that UNION ALL is a simple concatenation and should be preferred wherever possible whereas a UNION will implicitly do a DISTINCT to remove duplicate tuples.</p>
<p>UNIONs, like DISTINCT, have their place. There are valid applications. But if you find yourself doing a lot of them, particularly in sub-queries, then you’re probably doing something wrong. That might be a case of poor query construction or a poorly designed data model forcing you to do such things.</p>
<p>UNIONs, particularly when used in joins or dependent sub-queries, can cripple a database. Try to avoid them whenever possible.</p>
<p><strong>14. Using OR conditions in queries</strong></p>
<p>This might seem harmless. After all, ANDs are OK. OR should be OK too right? Wrong. Basically, an AND condition <strong>restricts</strong> the data set, whereas an OR condition <strong>grows</strong> it, but not in a way that lends itself to optimization. Particularly when the different OR conditions might intersect thus forcing the optimizer to effectively to a DISTINCT operation on the result.</p>
<p>Bad:</p>
<pre><code>... WHERE <span class="tag">a</span> = <span class="number">2</span> OR <span class="tag">a</span> = <span class="number">5</span> OR <span class="tag">a</span> = <span class="number">11</span>
</code></pre><p>Better:</p>
<pre><code><span class="attribute">...</span> <span class="keyword">WHERE</span> a <span class="keyword">IN</span> (<span class="number">2</span>, <span class="number">5</span>, <span class="number">11</span>)
</code></pre><p>Now your SQL optimizer may effectively turn the first query into the second. But it might not. Just don’t do it.</p>
<p><strong>15. Not designing their data model to lend itself to high-performing solutions</strong></p>
<p>This is a hard point to quantify. It is typically observed by its effect. If you find yourself writing complicated queries for relatively simple tasks or that queries for finding out relatively straightforward information are not efficient, then you probably have a poor data model.</p>
<p>In some ways this point summarizes all the earlier ones, but it’s more of a cautionary tale that doing things like query optimization is often done first when it should be done second. First and foremost you should ensure you have a good data model before trying to optimize the performance. As <a href="http://en.wikipedia.org/wiki/Donald_Knuth" target="_blank" rel="external">Donald Knuth</a> said:</p>
<blockquote>
<p>Premature optimization is the root of all evil</p>
</blockquote>
<p><strong>16. Incorrect use of Database Transactions</strong></p>
<p>All data changes for a specific process should be atomic. That is, if the operation succeeds, it does so fully. If it fails, the data is left unchanged. There should be no possibility of ‘half-done’ changes.</p>
<p>Ideally, the simplest way to achieve this is that the entire system design should strive to support all data changes through single INSERT/UPDATE/DELETE statements. In this case, no special transaction handling is needed, as your database engine should do so automatically.</p>
<p>However, if any processes do require multiple statements be performed as a unit to keep the data in a consistent state, then appropriate transaction control is necessary.</p>
<ul>
<li>Begin a transaction before the first statement.</li>
<li>Commit the transaction after the last statement.</li>
<li>On any error, rollback the transaction. And very newbie! Don’t forget to skip/abort all statements that follow after the error.</li>
</ul>
<p>Also pay careful attention to the subtleties of how your database connectivity layer, and database engine interact in this regard.</p>
<p><strong>17. Not understanding the ‘set-based’ paradigm</strong></p>
<p>The SQL language follows a specific paradigm suited to specific kinds of problems. Various vendor-specific extensions notwithstanding, the language struggles to deal with problems that are trivial in languages like Java, C#, <a href="http://en.wikipedia.org/wiki/Embarcadero_Delphi" target="_blank" rel="external">Delphi</a>, etc.</p>
<p>This lack of understanding manifests itself in a few ways.</p>
<ul>
<li>Inappropriately imposing too much procedural or imperative logic on the database.</li>
<li>Inappropriate or excessive use of <a href="http://en.wikipedia.org/wiki/Cursor_%28databases%29" target="_blank" rel="external">cursors</a>. Especially when a single query would suffice.</li>
<li>Incorrectly assuming that triggers fire once per row affected in multi-row updates.</li>
</ul>
<p>Determine clear division of responsibility, and strive to use the appropriate tool to solve each problem.</p>

            
        </div>
    </div>
    <footer class="article-footer">
        <a data-url="http://ricston.co.uk/tech/database-design.html" data-id="ciapfqkfx003v6p6dej896gpa" class="article-share-link">Share</a>
        
        
    </footer>
    
    
    

    <div class="container">
    <div class="row">

        <div class="col-sm-8">
            <h3 class="noSubtitle">Get in touch</h3>
        </div>
        <!--<div class="col-sm-12">-->
        <!--<div id="mapWrapper" class="mb30"></div>-->
        <!--</div>-->

        <div class="col-sm-8">
            <form method="post" action="" id="contactfrm" role="form">

                <div class="col-sm-6">
                    <img src="/images/CONTACT-MULE.png" width="140px"/>
                    <h4>Address:</h4>
                    <address>
                        <b>Ricston UK Ltd</b><br/>
                        Unit 5, 520 Chiswick High Rd.<br/>
                        London, W4 5RG <br/>
                    </address>
                    <h4>Phone:</h4>
                    <address>
                        +44 (0)20 719 351 07 <br/>
                    </address>
                    <h4>Mobile:</h4>
                    <address>
                        +44 (0)78 732 938 96<br/>
                    </address>
                    <hr/>
                    <address>
                        <b>Ricston Malta Ltd</b><br/>
                        Northfields, Suite 4, Independence Avenue, <br/>
                        Mosta, MST9026, Malta <br/>
                    </address>
                    <h4>Phone:</h4>
                    <address>
                        +356 2133 4457 <br/>
                    </address>
                    <h4>Fax:</h4>
                    <address>
                        +356 2133 4156<br/>
                    </address>

                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Enter name"
                               title="Please enter your name (at least 2 characters)"/>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" class="form-control" name="email" id="email" placeholder="Enter email"
                               title="Please enter a valid email address"/>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input name="phone" class="form-control required digits" type="tel" id="phone" size="30"
                               value="" placeholder="Enter phone"
                               title="Please enter a valid phone number (at least 10 characters)">
                    </div>
                    <div class="form-group">
                        <label for="comments">Comments</label>
                            <textarea name="comment" class="form-control" id="comments" cols="3" rows="5"
                                      placeholder="Enter your message…"
                                      title="Please enter your message (at least 10 characters)"></textarea>
                    </div>
                    <div class="col-md-8 col-md-offset-6">
                        <div class="result"></div>
                        <button name="submit" type="submit" class="btn btn-md" id="submit"> Submit</button>
                    </div>
                    <!--<fieldset class="clearfix securityCheck">-->
                    <!--<legend>Security</legend>-->
                    <!--<div class="form-group">-->
                    <!--<input class="required form-control" id="verify" name="verify" type="text">-->
                    <!--</div>-->
                    <!--</fieldset>-->
                </div>

            </form>
        </div>
    </div>
</div>

    </div>



</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-Dart/">Angular Dart</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ELK/">ELK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elastic-Search/">Elastic Search</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fluentd/">Fluentd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logstash/">Logstash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acid/">acid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-processing/">data_processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devOps/">devOps</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grails/">grails</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/groovy/">groovy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mean/">mean</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/">mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongo/">mongo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgress/">postgress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/richard-donovan/">richard.donovan</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">spark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/upgrade/">upgrade</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular-Dart/" style="font-size: 10px;">Angular Dart</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/ELK/" style="font-size: 10px;">ELK</a> <a href="/tags/Elastic-Search/" style="font-size: 10px;">Elastic Search</a> <a href="/tags/Fluentd/" style="font-size: 10px;">Fluentd</a> <a href="/tags/Logstash/" style="font-size: 10px;">Logstash</a> <a href="/tags/acid/" style="font-size: 10px;">acid</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/ci/" style="font-size: 10px;">ci</a> <a href="/tags/data-processing/" style="font-size: 10px;">data_processing</a> <a href="/tags/devOps/" style="font-size: 10px;">devOps</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/express/" style="font-size: 10px;">express</a> <a href="/tags/grails/" style="font-size: 10px;">grails</a> <a href="/tags/groovy/" style="font-size: 10px;">groovy</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/mean/" style="font-size: 10px;">mean</a> <a href="/tags/mobile/" style="font-size: 10px;">mobile</a> <a href="/tags/mongo/" style="font-size: 10px;">mongo</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/postgress/" style="font-size: 10px;">postgress</a> <a href="/tags/richard-donovan/" style="font-size: 20px;">richard.donovan</a> <a href="/tags/spark/" style="font-size: 10px;">spark</a> <a href="/tags/upgrade/" style="font-size: 10px;">upgrade</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/2015/06/">June 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/2015/05/">May 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/2015/04/">April 2015</a><span class="archive-list-count">12</span></li></ul>
    </div>
  </div>

  
    
  <div class="">
    <div class="">
      <ul>
        
          <li>
            <a href="/blog/Rancher-and-Docker-Tutorial/">Rancher and Docker Tutorial</a>
          </li>
        
          <li>
            <a href="/blog/Build-Grails-Applications-with-TeamCity/">Build Grails Applications with TeamCity</a>
          </li>
        
          <li>
            <a href="/blog/Upgrading-from-Grails-2-x-to-Grails-3/">Upgrading from Grails 2.x to Grails 3</a>
          </li>
        
          <li>
            <a href="/blog/Do-any-proven-enterprise-grade-transactional-ACID-compliant-JSON-database-engines-exist/">Do any proven, enterprise-grade, transactional, ACID compliant JSON database engines exist?</a>
          </li>
        
          <li>
            <a href="/blog/ContainerLogging/">Centralized Docker 1.6 Logging with ELK Stack (and Fluentd) </a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
    </div>
    <!-- footer from layout -->
    <footer id="footer">
    
    <div class="outer">
        <div id="footer-info" class="inner">
            <div class="row">
                <div class="col-md-3">
                    &copy; 2015 Ricston Ltd<br>
                    Powered by <a href="https://nodejs.org/">Nodejs</a> and <a href="http://hexo.io/"
                                                                               target="_blank">Hexo</a>
                </div>
                <div class="col-md-3">
                    <iframe width="225" height="570" src="http://meetu.ps/2JNbcQ" frameborder="0"></iframe>
                </div>
                <div  class="col-md-3" >
                    <iframe width="225" height="570" src="http://meetu.ps/2JNb1K" frameborder="0"></iframe>
                </div>
                <div class="col-md-3 right text-right">
                    <h2>
                        <a href="https://www.linkedin.com/company/ricston-ltd" target="_blank"><i class="fa fa-linkedin"></i></a> &nbsp
                    <a href="https://www.facebook.com/ricston" target="_blank"><i class="fa fa-facebook"></i></a> &nbsp
                    <a href="https://twitter.com/ricston"><i class="fa fa-twitter"></i></a> &nbsp
                    <a href="https://www.facebook.com/ricston"><i class="fa fa-google-plus"></i></a> &nbsp
                    <a href="#"><i class="fa fa-rss"></i></a></h2>
                </div>
            </div>
        </div>
    </div>
</footer>
    




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>